{%
const title = 'thoughts'
const description = 'weblog, random thoughts'
%}

{% extend('index.html', {title, description}) %}

<header>
  <h1>Weblog</h1>
  <h1>{{include('partials/feed-links.html')}}</h1>
</header>

{%
_.each(sortPosts(posts), post => {
  const path = 'thoughts/' + post.name
%}

  <h2>
    <a href="/{{path}}/">{{post.title}}</a>
  </h2>

  {% if (post.description) { %}
    <p>{{post.description}}</p>
  {% } else { %}
    <p>
      {{truncate(include(`${path}.md`, {extend: _.noop}), 127)}}
      <a href="/{{path}}/">â†’</a>
    </p>
  {% } %}

  <p class="text-gray text-smaller">
    {{post.date instanceof Date ? post.date.toDateString() : post.date}}
  </p>

{% }) %}
